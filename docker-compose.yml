version: "3.9"

services:
  trader:
    image: trading-bot:cuda
    container_name: trading-bot
    runtime: nvidia
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              capabilities: [gpu]

    environment:
      - NVIDIA_VISIBLE_DEVICES=all
      - NVIDIA_DRIVER_CAPABILITIES=compute,utility

    volumes:
      - ./data:/app/data
      - ./logs:/app/logs

    command: python3 -m trade.main